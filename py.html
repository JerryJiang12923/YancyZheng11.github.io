<!DOCTYPE html>
 <html>
 <head>
 <meta charset="utf-8">
 <title>钉钉机器人</title>
 <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
 <script defer src="https://pyscript.net/latest/pyscript.js"></script>
 </head>
 <body>
 <py-script>
 import time
 import hmac
 import hashlib
 import base64
 import urllib.parse

 timestamp = str(round(time.time() * 1000))
 secret = 'this is secret'
 secret_enc = secret.encode('utf-8')
 string_to_sign = '{}\n{}'.format(timestamp, secret)
 string_to_sign_enc = string_to_sign.encode('utf-8')
 hmac_code = hmac.new(secret_enc, string_to_sign_enc, digestmod=hashlib.sha256).digest()
 sign = urllib.parse.quote_plus(base64.b64encode(hmac_code))
 print(timestamp)
 print(sign)
 </py-script>
 </body>
 </html>
